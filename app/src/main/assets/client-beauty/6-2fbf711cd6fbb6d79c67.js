webpackJsonp([6],{1005:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.list.length>0?n("div",{staticClass:"recommend"},[n("div",{staticClass:"tlt"},[t._v("相关推荐")]),n("ul",t._l(t.list,function(e){return n("li",[n("router-link",{attrs:{to:e.url}},[n("div",{staticClass:"cover"},[n("img",{attrs:{src:e.cover}}),n("span",{staticClass:"icon"})]),n("div",{staticClass:"title"},[t._v(t._s(e.name))])])],1)}))]):t._e()},staticRenderFns:[]}},1011:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video"},[n("div",{staticClass:"wrap",class:[{taller:1===t.displayVideo.mode}]},[t.ready?n("videoItem",{key:t.displayVideo.id,attrs:{displayVideo:t.displayVideo}}):t._e()],1),n("div",{staticClass:"info"},[n("div",{staticClass:"title"},[n("div",{staticClass:"name"},[t._v(t._s(t.displayVideo.name))]),t.inApp?n("div",{staticClass:"share",on:{click:t.share}},[n("span",{staticClass:"icon"})]):t._e()]),n("div",{staticClass:"extra"},[n("span",{staticClass:"icon read"}),n("span",[t._v(t._s(t.videoSocialStat.browseCnt))]),n("span",{staticClass:"icon duration"}),n("span",[t._v(t._s(t.displayVideo.duration))])]),n("div",{staticClass:"user"},[n("div",{staticClass:"avator",on:{click:t.toProfilePage}},[n("img",{attrs:{src:t.author.avatarUrl}}),t.author.isVip?n("span",{staticClass:"vip"}):t._e()]),n("div",{staticClass:"detail"},[n("div",{staticClass:"name"},[t._v(t._s(t.author.nickname))]),t.author.s1?n("div",{staticClass:"s1"},[t._v(t._s(t.author.s1))]):t._e()])]),n("div",{staticClass:"description"},[t._v(t._s(t.displayVideo.description))]),n("div",{staticClass:"time"},[t._v("编辑于 "+t._s(t.displayVideo.updateTime))])]),t.productList&&t.productList.length?n("productList",{attrs:{productList:t.productList}}):t._e(),n("recommend",{attrs:{"res-id":t.displayVideo.id}}),t.displayVideo.id?n("comments",{attrs:{"res-id":t.displayVideo.id,"res-type":20,currentUser:t.currentUser}}):t._e(),t.inApp?t._e():n("app-more",{attrs:{text:"查看更多精彩内容"}})],1)},staticRenderFns:[]}},425:function(t,e,n){function i(t){n(792)}var s=n(31)(n(695),n(1011),i,"data-v-7cd2d664",null);t.exports=s.exports},429:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(44),r=i(s),a=n(432),o=i(a),c=null,u=function(){if(c)return c;var t=r.default.extend(o.default);return c=new t({el:document.createElement("div")}),document.body.appendChild(c.$el),c};e.default=function(t){var e=u();e.message="string"==typeof t?t:t.message;var n=document.getElementById("main");e.marginTop=(n&&n.offsetTop/75||0)+"rem";var i=t.duration||1400,s=t.callback;return clearTimeout(e.timer),e.visible=!0,e.timer=setTimeout(function(){e.visible=!1,s&&s()},i+250),e}},430:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{message:{type:String,default:""},marginTop:{type:String,default:"0"}},computed:{content:function(){return this.message.replace(/\n/g,"<br/>")}},data:function(){return{visible:!1}}}},431:function(t,e){},432:function(t,e,n){function i(t){n(431)}var s=n(31)(n(430),n(433),i,"data-v-1f604b81",null);t.exports=s.exports},433:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"ease"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"toast",style:{marginTop:t.marginTop},domProps:{innerHTML:t._s(t.content)}})])},staticRenderFns:[]}},436:function(t,e,n){function i(t){n(448)}var s=n(31)(n(446),n(453),i,"data-v-9b529db2",null);t.exports=s.exports},437:function(t,e,n){function i(t){n(440)}var s=n(31)(n(438),n(442),i,"data-v-759f3ade",null);t.exports=s.exports},438:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{txt:{default:"正在加载..."}}}},440:function(t,e){},442:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-loading"},[n("img",{attrs:{src:"/res/image/loading.png"}}),n("span",[t._v(t._s(t.txt))])])},staticRenderFns:[]}},446:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=n(32),a=n(54),o=n(97),c=i(o),u=n(429),l=i(u),d=n(98),p=i(d),f=n(69);e.default={props:{user:{type:Object,default:function(){return{}}}},computed:s({},(0,r.mapState)({inMiniProgram:"inMiniProgram"}),{displayUser:function(){var t=c.default.cloneDeep(this.user);return t.avatarUrl=p.default.convertToNosUrl(t.avatarUrl||a.IMGS.AVATAR,"140y140"),t.vip=p.default.isVipUser(t.authType),t}}),methods:{toUserProfilePage:function(t){if(this.inMiniProgram)f.callApp();else if(this.$beauty.inApp){var e=this.$beauty.getURLScheme("webview",{url:"/user/"+t});e?location.href=e:(0,l.default)("请将网易美学更新到1.5以上版本")}else this.$router.push("/user/"+t)}}}},448:function(t,e){},451:function(t,e,n){function i(t){n(479)}var s=n(31)(n(461),n(497),i,"data-v-d3c6b8b6",null);t.exports=s.exports},453:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"avatar",on:{click:function(e){t.toUserProfilePage(t.displayUser.id)}}},[n("img",{attrs:{src:t.displayUser.avatarUrl}}),t.displayUser.vip?n("span"):t._e()])},staticRenderFns:[]}},456:function(t,e,n){function i(t){n(475)}var s=n(31)(n(458),n(493),i,"data-v-683096cc",null);t.exports=s.exports},457:function(t,e,n){function i(t){n(469)}var s=n(31)(n(463),n(487),i,"data-v-098b2229",null);t.exports=s.exports},458:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{text:{type:String,default:"还没有内容"}}}},459:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=n(97),a=i(r),o=n(32),c=n(98),u=i(c),l=n(436),d=i(l),p=n(69);e.default={props:{comment:{type:Object,require:!0}},computed:s({},(0,o.mapState)(["inApp"]),{displayComment:function(){var t=a.default.cloneDeep(this.comment);t.author||(t.author={});var e=t.praiseCount;t.praiseCount=e<1e5?e:parseInt(e/1e4)+"万";var n=t.images;n&&n.length>0&&(t.displayImages=n.map(function(t){return u.default.convertToNosUrl(t,"184y184",{force:!0})}));var i=t.replyComment;if(i){if(-5===i.status||-10===i.status)t.replyComment="评论已被删除";else{t.replyUser=i.author&&i.author.nickname,t.replyComment="："+i.content;var s=i.images;s&&s.length>0&&(t.displayReplyImages=s.map(function(t){return u.default.convertToNosUrl(t,"170y170",{force:!0})}))}}return t}}),methods:{launchApp:function(){p.callApp()}},components:{avatar:d.default}}},460:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(49),r=i(s),a=n(98),o=i(a),c=n(436),u=i(c);e.default={data:function(){return{content:"",maxContentLength:140}},props:{resId:{type:[Number,String],require:!0},resType:{type:Number,require:!0},currentUser:{type:Object,default:function(){return{}}},add:Function},watch:{content:function(){var t=this;this.$nextTick(function(){t.adjustHeight()})}},computed:{isLogin:function(){var t=this.currentUser;return!(!t||!t.id)},contentLength:function(){return parseInt(o.default.getStrLength(this.content)/2)}},methods:{checkLogin:function(){this.isLogin||(window.location.href="/login")},adjustHeight:function(){var t=this.$refs.input,e=t.scrollHeight;t.style.height="auto";var n=t.scrollHeight;t.style.height=Math.min(e,n)+"px"},hideKeyboard:function(){this.$refs.input.blur()},send:function(){var t=this;if(!this.sending){var e=this.content;if(e){var n=this.maxContentLength;if(this.contentLength>n)return void alert("评论不超过"+n+"个字");this.sending=!0,(0,r.default)("/comment/add",{method:"POST",body:{resId:this.resId,resType:this.resType,commentId:0,content:e}}).then(function(e){if(301===e.code)return void alert(e.msg||"请求失败，请稍后再试");t.add({content:t.content,displayCreateTime:"刚刚",likedCount:0,author:t.user,praised:!1,target:null}),t.content="",t.sending=!1},function(e){alert(e.msg||"请求失败，请稍后再试"),t.sending=!1})}}}},components:{avatar:u.default}}},461:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=n(49),a=i(r),o=n(437),c=i(o),u=n(97),l=i(u),d=n(32),p=n(456),f=i(p),m=n(480),v=i(m),h=n(481),y=i(h),g=n(69),_={loading:!1,fetched:!1,fetchFailed:!1,hasNext:!0,inOldApp:!1,comments:{list:[],total:null}};e.default={props:{resId:{type:[Number,String],require:!0},resType:{type:Number,require:!0},currentUser:{type:Object,default:function(){return{}}}},watch:{resId:function(t,e){this.reset(),this.getList()}},mounted:function(){var t=this;this.getList(),document.addEventListener("MZBridgeLoaded",function(){t.ua.match(/NEMEIXUE/)||(t.inOldApp=!0)}),document.addEventListener("WebViewJavascriptBridgeReady",function(){t.ua.match(/NEMEIXUE/)||(t.inOldApp=!0)}),window.addEventListener("scroll",this.onScroll)},data:function(){return l.default.cloneDeep(_)},computed:s({text:function(){return this.comments.total>5?"查看更多精彩评论":"查看更多精彩内容"},pageEndId:function(){var t=this.comments.list;return t&&t.length?t[t.length-1].id:-1}},(0,d.mapState)(["inApp","ua"])),methods:{reset:function(){for(var t in _)this[t]=_[t]},getList:function(){var t=this;this.hasNext&&!this.loading&&(this.loading=!0,(0,a.default)("/comments",{body:{count:5,resId:this.resId,resType:this.resType,pageEndId:this.pageEndId}}).then(function(e){var n=e.result||{},i=n.list,s=void 0===i?[]:i,r=n.total,a=void 0===r?0:r,o=n.hasNext;t.comments={list:t.comments.list.concat(s),total:a},t.hasNext=o,t.loading=!1,t.fetched=!0,t.fetchFailed=!1},function(e){t.loading=!1,t.fetched=!0,t.fetchFailed=!0}))},add:function(t){this.comments.list.unshift(t),this.comments.total++},onScroll:function(){this.inApp&&!this.fetchFailed&&g.isBottomVisible(this.$refs.comment)&&this.getList()}},components:{loading:c.default,empty:f.default,comment:v.default,send:y.default}}},462:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(98),s=function(t){return t&&t.__esModule?t:{default:t}}(i),r=n(69);e.default={props:["item","prevIsProduct","isScreencapture"],data:function(){return{isUserProduct:8===this.item.type,product:this.item.content}},computed:{productUrl:function(){return this.isUserProduct?null:"/product/"+this.product.id},coverUrl:function(){var t=this.isUserProduct?this.product.coverUrl:this.product.sku&&this.product.sku.imageUrl||this.product.imageUrl;return s.default.convertToNosUrl(t,"265y265")}},methods:{toProduct:function(t){t&&this.$router.push(t)},callApp:function(){r.callApp()}}}},463:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(98),r=i(s),a=n(97),o=i(a),c=n(482),u=i(c);e.default={props:{medias:{type:Array,default:function(){return[]}},css:{type:Object,default:function(){return{}}},isScreencapture:{type:Boolean,default:function(){return!1}}},data:function(){return{}},components:{product:u.default},computed:{mediaList:function(){var t=this;return this.medias.map(function(e,n){var i=o.default.cloneDeep(e),s=t.medias[n-1]||{},a=t.medias[n+1]||{};if(3===i.type)if(i.imageUrl=r.default.convertToNosUrl(i.content.url,i.content.width>750?"750x0":"",{noEnlarge:!0}),i.content&&i.content.height&&i.content.width){var c=i.content.width/75;i.imgWidth=Math.min(9.2,c).toFixed(3),i.imgHeight=(i.content.height/i.content.width*i.imgWidth).toFixed(3)+"rem",i.imgWidth+="rem"}else i.imgWidth="auto",i.imgHeight="auto";return i.prevIsProduct=n>0&&(1===s.type||8===s.type||7===s.type),i.showTxt=!(6!==e.type||!e.content&&6===s.type||!e.content&&6===a.type&&a.content),i})}}}},469:function(t,e){},473:function(t,e){},474:function(t,e){},475:function(t,e){},477:function(t,e){},479:function(t,e){},480:function(t,e,n){function i(t){n(473)}var s=n(31)(n(459),n(491),i,"data-v-512e1fd2",null);t.exports=s.exports},481:function(t,e,n){function i(t){n(477)}var s=n(31)(n(460),n(495),i,"data-v-7591cda5",null);t.exports=s.exports},482:function(t,e,n){function i(t){n(474)}var s=n(31)(n(462),n(492),i,"data-v-66a5b834",null);t.exports=s.exports},487:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"medias",staticStyle:{}},[n("ul",t._l(t.mediaList,function(e){return n("li",[1==e.type||8==e.type||7==e.type?n("product",{attrs:{item:e,"prev-is-product":e.prevIsProduct,"is-screencapture":t.isScreencapture}}):t._e(),3==e.type?n("div",{staticClass:"media pic"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageUrl,expression:"item.imageUrl"}],style:{width:e.imgWidth,height:e.imgHeight},attrs:{alt:""}})]):t._e(),e.showTxt?n("div",{staticClass:"media txt",domProps:{innerHTML:t._s(e.content)}}):t._e()],1)}))])},staticRenderFns:[]}},491:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("div",{staticClass:"wrap"},[n("avatar",{attrs:{user:t.displayComment.author,lazy:"true"}}),n("div",{staticClass:"info"},[n("div",{staticClass:"name"},[t._v(t._s(t.displayComment.author&&t.displayComment.author.nickname))]),n("div",{staticClass:"time"},[t._v(t._s(t.displayComment.displayCreateTime))])]),t.inApp?t._e():n("div",{staticClass:"u-praise",on:{click:t.launchApp}},[t._v(t._s(t.displayComment.praiseCount||"0"))])],1),n("div",{staticClass:"content"},[n("span",{staticClass:"text"},[t._v(t._s(t.displayComment.content))]),t.displayComment.displayImages&&t.displayComment.displayImages.length>0?n("ul",{staticClass:"comment-images",on:{click:t.launchApp}},t._l(t.displayComment.displayImages,function(t){return n("li",{staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"image"}]})])})):t._e(),t.displayComment.replyComment?n("div",{staticClass:"reply"},[n("span",{staticClass:"user"},[t._v(t._s(t.displayComment.replyUser))]),t._v(t._s(t.displayComment.replyComment)+"\n      "),t.displayComment.displayReplyImages&&t.displayComment.displayReplyImages.length>0?n("ul",{staticClass:"comment-images reply",on:{click:t.launchApp}},t._l(t.displayComment.displayReplyImages,function(t){return n("li",{staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"image"}]})])})):t._e()]):t._e()])])},staticRenderFns:[]}},492:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["media","prd",{"prd-1":t.prevIsProduct}],on:{click:function(e){t.toProduct(t.productUrl)}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.coverUrl,expression:"coverUrl"}]}),n("div",{staticClass:"info"},[n("div",{staticClass:"zhName"},[t._v(t._s(t.product.name4wap1))]),n("div",{staticClass:"wrap"},[n("div",{staticClass:"desc"},[n("div",{staticClass:"enName"},[t._v(t._s(t.product.name4wap2))]),n("div",{staticClass:"enName enName-xd"},[t.product.noteCnt>0?n("div",[t.isScreencapture?n("span",[t._v("在网易美学有")]):t._e(),t._v(t._s(t.product.noteCnt)+"篇心得\n            "),t.isUserProduct||t.isScreencapture?t._e():n("span",{staticClass:"gt"})]):t._e()])]),t.isUserProduct||t.isScreencapture?t._e():n("div",{staticClass:"grass",on:{click:function(e){e.stopPropagation(),t.callApp(e)}}},[n("span",{staticClass:"icon"}),n("div",[t._v("长草")])])])])])},staticRenderFns:[]}},493:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty"},[n("div",{staticClass:"background"}),n("div",{staticClass:"txt"},[t._v(t._s(t.text))])])},staticRenderFns:[]}},495:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"send",on:{click:t.checkLogin}},[n("avatar",{attrs:{user:t.currentUser}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",staticClass:"content",attrs:{type:"search",disabled:!t.isLogin,placeholder:"谢谢你这么好看还来给我评论~",rows:"1"},domProps:{value:t.content},on:{keyup:t.adjustHeight,keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.hideKeyboard(e)},input:function(e){e.target.composing||(t.content=e.target.value)}}}),n("div",[t.contentLength>=100?n("div",{staticClass:"tip"},[t._v(t._s(t.maxContentLength-t.contentLength))]):t._e(),n("div",{staticClass:"btn",attrs:{disabled:!t.isLogin},on:{click:t.send}},[t._v("发送")])])],1)},staticRenderFns:[]}},497:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-comments"},[n("div",{ref:"comment",staticClass:"wrapper"},[n("div",{staticClass:"title"},[t._v("评论"),null!==t.comments.total?n("span",[t._v("("+t._s(t.comments.total)+")")]):t._e()]),t.inApp&&!t.inOldApp?n("send",{attrs:{"res-id":t.resId,"res-type":t.resType,"current-user":t.currentUser,add:t.add}}):t._e(),t.comments.total?n("div",t._l(t.comments.list||[],function(t){return n("comment",{key:t.id,attrs:{comment:t}})})):t._e(),0===t.comments.total?n("empty",{attrs:{text:"还没有评论"}}):t._e(),n("div",{staticClass:"loading"},[!t.fetched||!t.fetchFailed&&t.hasNext&&t.inApp?n("loading"):t._e()],1),t.fetchFailed?n("div",{staticClass:"failed",on:{click:t.getList}},[t._m(0,!1,!1)]):t._e()],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"txt"},[t._v("加载失败，"),n("span",[t._v("点击重新加载")])])}]}},693:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(98),r=i(s),a=n(97),o=i(a),c=n(49),u=i(c),l={recommendList:[]};e.default={props:{resId:{type:String}},data:function(){return l},watch:{resId:function(t,e){this.reset(),this.getData()}},computed:{list:function(){return this.recommendList.map(function(t){var e=o.default.cloneDeep(t);return e.cover=r.default.convertToNosUrl(t.cover,"336y188",{force:!0}),e.url="/video/"+t.id+"?abtest="+t.abtest+"&pvid="+t.pvid,e})}},mounted:function(){this.getData()},methods:{reset:function(){for(var t in l)this[t]=l[t]},getData:function(){var t=this;(0,u.default)("/api/video/"+this.resId+"/recommend",{body:{count:20,pageEndId:-1}}).then(function(e){t.recommendList=e.result&&e.result.list||[]},function(t){alert(t.msg||"获取相关视频失败")})}}}},694:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(49),s=function(t){return t&&t.__esModule?t:{default:t}}(i),r={INIT:"init",PLAY:"play",PAUSE:"pause",END:"end"};e.default={props:{displayVideo:{type:Object,required:!0}},data:function(){return{videoStatus:r,clicked:!1,played:!1,status:r.INIT,id:this.$route.params.id,usingNativeControls:!0}},computed:{isWifi:function(){return this.$store.getters.isWifi}},mounted:function(){this.initPlayer()},methods:{initPlayer:function(){var t=this,e={poster:this.displayVideo.cover},n=this.$refs.video;window.neplayer.__cache={};var i=window.neplayer(n,e);this.usingNativeControls=i.corePlayer.usingNativeControls_,this.myPlayer=i,i.onPlayState(1,function(){t.status=r.PLAY,t.played||(t.played=!0,(0,s.default)("/api/videoDisplay/"+t.id,{method:"POST"}))}),i.onPlayState(2,function(){t.status=r.PAUSE}),i.onPlayState(3,function(){t.status=r.END}),i.onError(function(){var t=document.getElementsByClassName("vjs-error-display")[0],e=null;if(t){e=t.getElementsByClassName("vjs-modal-dialog-content")[0],e.innerHTML='<div class="load-error"><span>网络太不给力，视频加载失败</span><span id="refresh-btn" class="icon"></span></div>';document.getElementById("refresh-btn").addEventListener("click",function(t){window.location.reload()})}})},onClickPlay:function(){if(this.clicked||!1!==this.isWifi)return void this.play();!0===window.confirm("您正在使用非wifi网络，将产生 "+this.displayVideo.size+" 流量，是否确定播放？")&&this.play()},play:function(){this.clicked=!0,this.myPlayer.play()}}}},695:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=n(98),a=i(r),o=n(451),c=i(o),u=n(54),l=n(97),d=i(l),p=n(32),f=n(914),m=i(f),v=n(915),h=i(v),y=n(916),g=i(y);e.default={computed:s({},(0,p.mapState)({video:"resource.videoDetailView",productList:function(t){return t.resource.products},author:function(t){var e=t.resource,n=e.videoDetailView||{},i=d.default.cloneDeep(n.userBean||{});return i.avatarUrl=a.default.convertToNosUrl(i.avatarUrl||u.IMGS.AVATAR,"116y116"),i.isVip=a.default.isVipUser(i.authType),i.isVip?i.s1=i.authDescription:(i.s1=i.age&&-1!==i.age?i.age:"",i.s1&&i.skinType&&i.skinType.name&&(i.s1+=" | "),i.skinType&&i.skinType.name&&(i.s1+=i.skinType.name)),i},videoSocialStat:function(t){var e=t.resource,n=e.videoDetailView||{},i=d.default.cloneDeep(n.videoSocialStat||{}),s=i.browseCnt;return s>=1e5&&(i.browseCnt=parseInt(s/1e4)+"万"),i},displayVideo:function(t){var e=t.resource,n=e.videoDetailView||{},i=d.default.cloneDeep(n.vcontent||{}),s=i.duration;if(s){var r=parseInt(s/60/60),a=parseInt(s/60-60*r),o=parseInt(s%60);s="",r&&(s+=r+":"),s+=a+":"+(o>9?o:"0"+o)}n.duration=s;var c=i.hdMp4Url||"";return c=c.replace(/^http:/i,""),n.url=c,n.size=(i.hdMp4Size/1024/1024).toFixed(2)+"M",n},currentUser:"resource.userBean",isLogin:function(t){return!!(t.resource.userBean||{}).id},inApp:"inApp",shareInfo:"resource.shareInfo"}),(0,p.mapGetters)(["isWifi"])),data:function(){return{inBrowser:!0,ready:!1}},mounted:function(){var t=this;this.loadNep().then(function(){t.ready=!0},function(){t.$store.commit("setError",{result:"资源加载失败"})})},methods:{loadNep:function(){function t(t){var n=document.getElementsByTagName("head")[0]||document.body||document.documentElement;if(!document.getElementById("nep-css")){var i=document.createElement("link");i.id="nep-css",i.rel="stylesheet",i.type="text/css",i.href="//nos.netease.com/vod163/nep.min.css",e.$nextTick(function(){n.appendChild(i)})}if(document.getElementById("nep-script"))t();else{var s=document.createElement("script");t&&s.addEventListener("load",t,!1),s.id="nep-script",s.type="text/javascript",s.src="//nos.netease.com/vod163/nep.min.js",e.$nextTick(function(){n.appendChild(s)})}}var e=this;return new Promise(function(e,n){t(function(){e()})})},share:function(){var t=window.MZBridge;if(t){var e=this.shareInfo||{};t.callHandler("share",{title:e.shareTitle,subTitle:e.subTitle,url:e.shareUrl,imageUrl:e.imageUrl})}},toProfilePage:function(){if(!this.inApp)return void this.$router.push("/user/"+this.author.id);window.location.href="nemeixue://user/"+this.author.id}},components:{comments:c.default,recommend:m.default,videoItem:h.default,productList:g.default}}},696:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(457),s=function(t){return t&&t.__esModule?t:{default:t}}(i),r=n(54);e.default={props:{productList:{type:Array}},data:function(){return{unfold:!1,listStyle:{}}},computed:{productCount:function(){return this.productList.length},ARROW:function(){return r.IMGS.ARROW},displayImgs:function(){var t=this.productList;return t=t.filter(function(t){return t.content.imageUrl&&t.content.imageUrl.length}).map(function(t){return t.content.imageUrl}),t.length>3&&(t=t.slice(0,3)),t}},components:{media:s.default},methods:{handleFold:function(){this.unfold=!this.unfold;var t=this.$refs.productList,e=this.$refs.media;this.unfold?this.listStyle.height=t.offsetHeight+e.$el.offsetHeight+"px":this.listStyle={}}}}},712:function(t,e){},715:function(t,e){},786:function(t,e){},792:function(t,e){},914:function(t,e,n){function i(t){n(786)}var s=n(31)(n(693),n(1005),i,"data-v-76345c2e",null);t.exports=s.exports},915:function(t,e,n){function i(t){n(715)}var s=n(31)(n(694),n(933),i,null,null);t.exports=s.exports},916:function(t,e,n){function i(t){n(712)}var s=n(31)(n(696),n(929),i,"data-v-126d06bf",null);t.exports=s.exports},929:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"productList",staticClass:"product-list",style:t.listStyle},[n("div",{staticClass:"product-list__header",on:{click:t.handleFold}},[n("span",[t._v("提及产品("+t._s(t.productCount)+")")]),t.unfold?t._e():n("div",{staticClass:"imgs"},t._l(t.displayImgs,function(t){return n("img",{attrs:{src:t}})})),n("div",{staticClass:"arrow",class:{reverse:t.unfold}})]),n("media",{ref:"media",attrs:{medias:t.productList}})],1)},staticRenderFns:[]}},933:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-video"},[n("video",{ref:"video",staticClass:"video-js vjs-big-play-centered vjs-fluid",attrs:{controls:"",preload:"metadata",poster:t.displayVideo.cover,"webkit-playsinline":"",playsinline:""}},[n("source",{attrs:{src:t.displayVideo.url,type:"video/mp4"}})]),t.status===t.videoStatus.INIT?n("div",{staticClass:"mask",on:{click:function(e){e.stopPropagation(),t.onClickPlay(e)}}},[t.usingNativeControls?t._e():n("div",{staticClass:"play"})]):t._e()])},staticRenderFns:[]}}});