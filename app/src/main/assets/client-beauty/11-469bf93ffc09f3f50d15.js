webpackJsonp([11],{1019:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showList?i("div",{ref:"wrapper",staticClass:"wrapper"},[i("ul",{staticClass:"my-list"},t._l(t.myList,function(e,s){return i("li",{staticClass:"my-trial",on:{click:function(i){t.toDetailPage(e,s)}}},[i("img",{attrs:{src:e.image}}),i("div",{staticClass:"info"},[i("div",{staticClass:"product"},[t._v(t._s(e.productBrandName)+" "+t._s(e.displaySkuValue))]),i("div",{staticClass:"status"},[t._v(t._s(e.status))]),i("div",{staticClass:"price"},[t._v("价值 ¥"+t._s(e.price))]),i("status-btn",{attrs:{trial:e}})],1)])})),t.fetchFailed||!t.hasNext||t.hasApplyingList?t._e():i("div",{staticClass:"loading"},[i("loading")],1),t.fetchFailed?i("div",{staticClass:"failed",on:{click:t.getList}},[t._m(0,!1,!1)]):t._e()]):i("div",{staticClass:"m-empty"},[i("img",{attrs:{src:"/res/image/notrial.png"}}),i("div",{staticClass:"text"},[t._v(t._s(t.emptyText))])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"txt"},[t._v("加载失败，"),i("span",[t._v("点击重新加载")])])}]}},1026:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.currentIndex,expression:"currentIndex===0"}],ref:"trialListWrapper",class:["list-wrapper",{"list-wrapper-1":t.showTabs}]},[i("trialList",{ref:"trialList",attrs:{"trial-list":t.trialList,"is-login":t.isLogin}})],1),t.isLogin&&1===t.currentIndex?i("div",{ref:"myListWrapper",class:["list-wrapper","myList",{"list-wrapper-1":t.showTabs}]},[i("myTrial",{ref:"myList"})],1):t._e(),t.showTabs?i("ul",{staticClass:"tab"},[i("li",{class:{active:0==t.currentIndex},on:{click:t.toTrialList}},[t._v("所有试用")]),i("li",{class:{active:1==t.currentIndex},on:{click:t.toMyTrial}},[t._v("我的试用")])]):t._e()]),i("app-banner")],1)},staticRenderFns:[]}},423:function(t,e,i){function s(t){i(807)}var n=i(31)(i(681),i(1026),s,"data-v-a6d843e6",null);t.exports=n.exports},429:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(44),a=s(n),r=i(432),o=s(r),l=null,c=function(){if(l)return l;var t=a.default.extend(o.default);return l=new t({el:document.createElement("div")}),document.body.appendChild(l.$el),l};e.default=function(t){var e=c();e.message="string"==typeof t?t:t.message;var i=document.getElementById("main");e.marginTop=(i&&i.offsetTop/75||0)+"rem";var s=t.duration||1400,n=t.callback;return clearTimeout(e.timer),e.visible=!0,e.timer=setTimeout(function(){e.visible=!1,n&&n()},s+250),e}},430:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{message:{type:String,default:""},marginTop:{type:String,default:"0"}},computed:{content:function(){return this.message.replace(/\n/g,"<br/>")}},data:function(){return{visible:!1}}}},431:function(t,e){},432:function(t,e,i){function s(t){i(431)}var n=i(31)(i(430),i(433),s,"data-v-1f604b81",null);t.exports=n.exports},433:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"ease"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"toast",style:{marginTop:t.marginTop},domProps:{innerHTML:t._s(t.content)}})])},staticRenderFns:[]}},435:function(t,e,i){var s=i(31)(i(439),i(441),null,null,null);t.exports=s.exports},437:function(t,e,i){function s(t){i(440)}var n=i(31)(i(438),i(442),s,"data-v-759f3ade",null);t.exports=n.exports},438:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{txt:{default:"正在加载..."}}}},439:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{top:{type:[Number,String],default:0},bottom:{type:[Number,String]},zIndex:{type:[Number,String],default:1e3}},mounted:function(){var t=this.top,e=this.bottom,i=this.zIndex,s=this.$refs.sticky,n=s.firstElementChild;if(s.style.position="-webkit-sticky",s.style.position="sticky",~s.style.position.indexOf("sticky"))return void 0!==e?(s.style.bottom=e+"px",s.style.top="auto"):s.style.top=t+"px",void(s.style.zIndex=i);n.style.left=0,n.style.right=0,void 0!==e?(n.style.bottom=e+"px",n.style.top="auto"):n.style.top=t+"px",n.style.zIndex=i;var a,r=!1,o=function(){var i=s.getBoundingClientRect().top,a=s.getBoundingClientRect().bottom;if(void 0!==e&&a>e||i<t){if(r)return;s.style.height||(s.style.height=s.clientHeight+"px"),n.style.position="fixed",r=!0}else{if(!r)return;n.style.position="",r=!1}};this.__listenAction=function(){a||(a=setInterval(o,30))},window.addEventListener("scroll",this.__listenAction)},beforeDestroy:function(){this.__listenAction&&window.removeEventListener("scroll",this.__listenAction)}}},440:function(t,e){},441:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"sticky",staticClass:"sticky"},[t._t("default")],2)},staticRenderFns:[]}},442:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"m-loading"},[i("img",{attrs:{src:"/res/image/loading.png"}}),i("span",[t._v(t._s(t.txt))])])},staticRenderFns:[]}},565:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},n=i(32);e.default={mounted:function(){this.inApp&&this.$beauty&&this.$beauty.task("enableRefresh")},destroyed:function(){this.inApp&&this.$beauty&&this.$beauty.task("disableRefresh")},computed:s({},(0,n.mapState)(["inApp"]))}},681:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(32),r=i(435),o=s(r),l=i(905),c=s(l),u=i(908),d=s(u),f=i(565),p=s(f);e.default={mixins:[p.default],computed:n({},(0,a.mapState)({trialList:function(t){return t.resource.trialList||{}},isLogin:function(t){return!!(t.resource.user||{}).id},tabs:function(){return[{name:"所有试用",type:"trialList",data:{"trial-list":this.trialList,"is-login":this.isLogin}},{name:"我的试用",type:"myTrial",data:{}}]},inApp:"inApp"}),{showTabs:function(){return this.isLogin&&this.inApp}}),data:function(){return{currentIndex:"trialList"===this.$route.name?0:1,scrollTop:0}},beforeDestroy:function(){this.scrollTop=0},watch:{$route:function(t,e){this.currentIndex="trialList"===t.name?0:1}},methods:{toTrialList:function(){this.$eventTrace({category:"TrailListTab",eventLabel:"AllTrial"}),this.currentIndex=0,this.$router.push("/trial"),this.$nextTick(function(){window.scrollTo(0,this.scrollTop)})},toMyTrial:function(){this.$eventTrace({category:"TrailListTab",eventLabel:"MyTrialList"}),this.currentIndex=1;var t=Math.max(document.body.scrollTop,document.documentElement.scrollTop);t&&(this.scrollTop=t),this.$router.push("/trial/list/myTrial")}},components:{trialList:c.default,myTrial:d.default,sticky:o.default}}},682:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(98),r=s(a),o=i(49),l=s(o),c=i(437),u=s(c),d=i(429),f=s(d),p=i(97),h=s(p),v=i(32);e.default={props:{currentUser:{type:Object,default:function(){return{}}},isLogin:{type:Boolean,default:function(){return!1}},trialList:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,fetchFailed:!1,list:[],hasNext:this.trialList.hasNext||!1,statusMap:{1:"立即申请",2:"已申请",3:"查看心得"}}},watch:{trialList:function(t){this.rawList=t.list}},computed:n({rawList:{get:function(){return this.list},set:function(t){this.list=t}},displayList:function(){var t=this;return this.list&&this.list.map(function(e){var i=h.default.cloneDeep(e);return i.imageUrl=r.default.convertToNosUrl(e.image,"690y360"),i.btnText=0===e.trialStatus?e.countingDown:t.statusMap[e.trialStatus],i.btnClass={btn:!0,"counting-down":0===e.trialStatus,end:2===e.trialStatus,"view-note":3===e.trialStatus},i.markClass="",e.newProduct&&(i.markClass="mark-new"),3===e.trialStatus&&(i.markClass="mark-end"),i})},pageEndId:function(){var t=this.list;return t&&t.length?t[t.length-1].id:0}},(0,v.mapState)(["inApp"])),created:function(){this.rawList=this.trialList.list},mounted:function(){window.addEventListener("scroll",this.onScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)},methods:{onScroll:h.default.throttle(function(){var t=Math.max(document.body.scrollTop,document.documentElement.scrollTop),e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);t+("CSS1Compat"===document.compatMode?document.documentElement.clientHeight:document.body.clientHeight)+50>=e&&this.getList()},200),toTrialDetailPage:function(t,e){if(this.inApp){var i=this.$beauty.getURLScheme("webview",{url:"/trial/"+t+"?da_location="+e});i?location.href=i:(0,f.default)("请将网易美学更新到1.5以上版本")}else{var s="/trial/"+t;location.href=s}},getList:function(){var t=this;this.hasNext&&!this.loading&&(this.loading=!0,(0,l.default)("/api/trial/list",{body:{pageEndId:this.pageEndId,count:20}}).then(function(e){var i=e.result||{},s=i.list,n=void 0===s?[]:s,a=i.hasNext;t.rawList=t.rawList.concat(n),t.hasNext=a,t.loading=!1,t.fetchFailed=!1},function(e){t.loading=!1,t.fetchFailed=!0}))}},components:{loading:u.default}}},683:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(98),r=s(a),o=i(49),l=s(o),c=i(97),u=s(c),d=i(32),f=i(437),p=s(f),h=i(429),v=s(h),m=i(54),y=i(907),g=s(y),_={list:[],total:0,current:0,scrollTop:0,loading:!1,fetched:!1,fetchFailed:!1};e.default={props:{currentIndex:{type:Number,default:0},type:{type:Number,default:0},hasApplyingList:{type:Boolean,default:!1}},data:function(){return u.default.cloneDeep(_)},computed:n({},(0,d.mapState)({hasRefresh:function(t){return t.hasRefresh}}),{myList:function(){return this.list&&this.list.map(function(t){var e=u.default.cloneDeep(t);switch(e.image=t.image?r.default.convertToNosUrl(t.image,"180y180"):r.default.convertToNosUrl(m.IMGS.DEFAULT_IMG,"180y180"),t.applyStatus){case 0:e.status=t.countingDown;break;case 5:e.status="申领失败";break;default:e.status="申领成功"}return e})},hasNext:function(){return!this.current||50*this.current<this.total},showList:function(){return this.list&&this.list.length>0||0===this.type&&this.hasApplyingList||!this.fetched},emptyText:function(){var t="";switch(this.type){case 1:t="还没有试用申请成功哦";break;case 2:t="还没有试用申请失败哦";break;default:t="还没有申请试用哦"}return t}}),watch:{hasRefresh:function(t){t&&this.type===this.currentIndex&&(this.current=0,this.getList())}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.hasNext&&!this.loading&&(this.loading=!0,(0,l.default)("/api/trial/myTrial",{body:{type:this.type,offset:50*this.current,limit:50}}).then(function(e){var i=e.result||{},s=i.list,n=void 0===s?[]:s,a=i.total,r=void 0===a?0:a;t.hasRefresh?(t.list=[].concat(n),t.$store.commit("setHasRefresh",!1)):t.list=t.list.concat(n),t.total=r,t.current=t.current+1,t.loading=!1,t.fetched=!0,t.fetchFailed=!1},function(e){t.hasRefresh&&t.$store.commit("setHasRefresh",!1),t.loading=!1,t.fetched=!0,t.fetchFailed=!0}))},onScroll:function(){if(this.$refs.wrapper){var t=this.$refs.wrapper,e=t.scrollTop,i=t.scrollHeight;e+t.clientHeight+50>=i&&this.hasNext&&this.getList()}},toDetailPage:function(t,e){var i=this,s=this.$beauty.getURLScheme("webview",{url:"/trial/"+t.trialId+"?da_location="+e+"&da_type="+i.type});s?location.href=s:(0,v.default)("请将网易美学更新到1.5以上版本")}},components:{loading:p.default,statusBtn:g.default}}},684:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(429),n=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default={props:{trial:{type:Object,default:{}}},data:function(){return{}},computed:{status:function(){return this.trial.applyStatus},statusText:function(){return{0:"申领中",1:"编辑地址",2:"写心得",3:"已过期",4:"已违规",5:"",6:"已完成"}[this.trial.applyStatus]},isDisabled:function(){return 3===this.status||4===this.status||6===this.status},isButton:function(){return 1===this.status||2===this.status}},methods:{toNativePage:function(){var t=this.trial,e=t.id,i=t.productId,s=t.skuId,a=t.trialId,r=1===this.status?this.$beauty.getURLScheme("editAddress",e):this.$beauty.getURLScheme("editTrialReport",{productId:i,skuId:s,trialId:a});r?location.href=r:(0,n.default)("请将网易美学更新到1.5以上版本")}}}},685:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(32),r=i(906),o=s(r),l=i(435),c=s(l),u=i(97),d=s(u);e.default={data:function(){return{currentIndex:0}},computed:n({},(0,a.mapState)({unreadInfo:function(t){return t.resource.unreadInfo||{}},tabs:function(t){return[{name:"申领中",type:"myList",wrapperRef:"wrapper0",ref:"MyList0",data:{type:0,hasApplyingList:t.resource.hasApplyingList,currentIndex:this.currentIndex}},{name:"申领成功",type:"myList",wrapperRef:"wrapper1",ref:"MyList1",data:{type:1,currentIndex:this.currentIndex}},{name:"申领失败",type:"myList",wrapperRef:"wrapper2",ref:"MyList2",data:{type:2,currentIndex:this.currentIndex}}]}})),mounted:function(){window.addEventListener("scroll",this.onScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)},methods:{onScroll:d.default.throttle(function(){var t="MyList"+this.currentIndex;this.$refs[t][0].onScroll()},200),onTabChange:function(t){this.$eventTrace({category:"MyTrialTab",eventLabel:t+1}),this.currentIndex=t,1===t&&this.unreadInfo.successInfo&&(this.unreadInfo.successInfo=!1)}},components:{myList:o.default,sticky:c.default}}},707:function(t,e){},726:function(t,e){},762:function(t,e){},800:function(t,e){},807:function(t,e){},905:function(t,e,i){function s(t){i(707)}var n=i(31)(i(682),i(924),s,"data-v-0bd90558",null);t.exports=n.exports},906:function(t,e,i){function s(t){i(800)}var n=i(31)(i(683),i(1019),s,"data-v-92b6e80a",null);t.exports=n.exports},907:function(t,e,i){function s(t){i(762)}var n=i(31)(i(684),i(980),s,"data-v-5bc2e609",null);t.exports=n.exports},908:function(t,e,i){function s(t){i(726)}var n=i(31)(i(685),i(944),s,"data-v-31ac851e",null);t.exports=n.exports},924:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.displayList&&t.displayList.length>0?i("ul",{ref:"trialList",staticClass:"trial-list"},t._l(t.displayList,function(e,s){return i("li",{staticClass:"trial",on:{click:function(i){t.toTrialDetailPage(e.id,s)}}},[i("img",{attrs:{src:e.imageUrl}}),e.markClass?i("div",{staticClass:"mark",class:e.markClass}):t._e(),i("div",{staticClass:"info"},[i("div",{staticClass:"product"},[t._v(t._s(e.productBrandName)+" "+t._s(e.spec))]),i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"bottom"},[i("div",{staticClass:"data"},[e.price?i("span",{staticClass:"price"},[t._v("价值 "),i("span",{staticClass:"num"},[t._v("¥"+t._s(e.price))])]):t._e(),e.quantity?i("span",[t._v("限量"),i("span",{staticClass:"num"},[t._v(t._s(e.quantity))]),t._v("份")]):t._e(),i("button",{class:e.btnClass},[t._v(t._s(e.btnText))])])])])])})):t._e(),i("div",{staticClass:"loading"},[!t.fetchFailed&&t.hasNext?i("loading"):t._e()],1),t.fetchFailed?i("div",{staticClass:"failed",on:{click:t.getList}},[t._m(0,!1,!1)]):t._e()])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"txt"},[t._v("加载失败，"),i("span",[t._v("点击重新加载")])])}]}},944:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-trial"},[i("ul",{staticClass:"tab"},t._l(t.tabs,function(e,s){return i("li",{class:{active:t.currentIndex==s},on:{click:function(){return t.onTabChange(s)}}},[t._v("\n      "+t._s(e.name)+"\n      "),1==s&&t.unreadInfo.successInfo?i("div",{staticClass:"dot"}):t._e()])})),t._l(t.tabs,function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.currentIndex===s,expression:"currentIndex===index"}],ref:e.wrapperRef,refInFor:!0,staticClass:"my-wrapper"},[i(e.type,t._b({ref:e.ref,refInFor:!0,tag:"div"},"div",e.data,!1))])})],2)},staticRenderFns:[]}},980:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return 5!==t.status?i("div",{staticClass:"status-btn"},[t.isButton?i("button",{staticClass:"btn",on:{click:function(e){e.stopPropagation(),t.toNativePage(e)}}},[t._v("\n    "+t._s(t.statusText)+"\n  ")]):i("div",{staticClass:"text",class:{disabled:t.isDisabled}},[t._v("\n    "+t._s(t.statusText)+"\n  ")])]):t._e()},staticRenderFns:[]}}});